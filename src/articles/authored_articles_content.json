[{"_id":"deploy_ghpages_actions","_body":"<h1>\nüöÄ Deploy project on GitHub Pages with GitHub Actions\n</h1>\n<h2 id=\"create-github-actions-yaml-file.\">Create GitHub Actions YAML file.</h2>\n<p>Will use James Ives‚Äô github-pages-deploy-action</p>\n<div class=\"sourceCode\" id=\"cb1\"><pre class=\"sourceCode yml\"><code class=\"sourceCode yaml\"><span id=\"cb1-1\"><a href=\"#cb1-1\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"co\"># .github/workflows/gh_pages_deploy.yml</span></span>\n<span id=\"cb1-2\"><a href=\"#cb1-2\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"fu\">name</span><span class=\"kw\">:</span><span class=\"at\"> Build and Deploy</span></span>\n<span id=\"cb1-3\"><a href=\"#cb1-3\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"fu\">on</span><span class=\"kw\">:</span></span>\n<span id=\"cb1-4\"><a href=\"#cb1-4\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"at\">  </span><span class=\"fu\">push</span><span class=\"kw\">:</span></span>\n<span id=\"cb1-5\"><a href=\"#cb1-5\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"at\">    </span><span class=\"fu\">branches</span><span class=\"kw\">:</span></span>\n<span id=\"cb1-6\"><a href=\"#cb1-6\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"at\">      </span><span class=\"kw\">-</span><span class=\"at\"> main</span></span>\n<span id=\"cb1-7\"><a href=\"#cb1-7\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"fu\">jobs</span><span class=\"kw\">:</span></span>\n<span id=\"cb1-8\"><a href=\"#cb1-8\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"at\">  </span><span class=\"fu\">build-and-deploy</span><span class=\"kw\">:</span></span>\n<span id=\"cb1-9\"><a href=\"#cb1-9\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"at\">    </span><span class=\"fu\">runs-on</span><span class=\"kw\">:</span><span class=\"at\"> ubuntu-latest</span></span>\n<span id=\"cb1-10\"><a href=\"#cb1-10\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"at\">    </span><span class=\"fu\">steps</span><span class=\"kw\">:</span></span>\n<span id=\"cb1-11\"><a href=\"#cb1-11\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"at\">      </span><span class=\"kw\">-</span><span class=\"at\"> </span><span class=\"fu\">name</span><span class=\"kw\">:</span><span class=\"at\"> Checkout üõéÔ∏è</span></span>\n<span id=\"cb1-12\"><a href=\"#cb1-12\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"at\">        </span><span class=\"fu\">uses</span><span class=\"kw\">:</span><span class=\"at\"> actions/checkout@v2.3.1</span></span>\n<span id=\"cb1-13\"><a href=\"#cb1-13\" aria-hidden=\"true\" tabindex=\"-1\"></a></span>\n<span id=\"cb1-14\"><a href=\"#cb1-14\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"at\">      </span><span class=\"kw\">-</span><span class=\"at\"> </span><span class=\"fu\">name</span><span class=\"kw\">:</span><span class=\"at\"> Install and Build üîß</span><span class=\"co\"> # This example project is built using npm and outputs the result to the &#39;build&#39; folder. Replace with the commands required to build your project, or remove this step entirely if your site is pre-built.</span></span>\n<span id=\"cb1-15\"><a href=\"#cb1-15\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"fu\">        run</span><span class=\"kw\">: </span><span class=\"ch\">|</span></span>\n<span id=\"cb1-16\"><a href=\"#cb1-16\" aria-hidden=\"true\" tabindex=\"-1\"></a>          npm install</span>\n<span id=\"cb1-17\"><a href=\"#cb1-17\" aria-hidden=\"true\" tabindex=\"-1\"></a>          npm run lint</span>\n<span id=\"cb1-18\"><a href=\"#cb1-18\" aria-hidden=\"true\" tabindex=\"-1\"></a>          npm run build</span>\n<span id=\"cb1-19\"><a href=\"#cb1-19\" aria-hidden=\"true\" tabindex=\"-1\"></a></span>\n<span id=\"cb1-20\"><a href=\"#cb1-20\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"at\">      </span><span class=\"kw\">-</span><span class=\"at\"> </span><span class=\"fu\">name</span><span class=\"kw\">:</span><span class=\"at\"> Deploy üöÄ</span></span>\n<span id=\"cb1-21\"><a href=\"#cb1-21\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"at\">        </span><span class=\"fu\">uses</span><span class=\"kw\">:</span><span class=\"at\"> JamesIves/github-pages-deploy-action@4.1.4</span></span>\n<span id=\"cb1-22\"><a href=\"#cb1-22\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"at\">        </span><span class=\"fu\">with</span><span class=\"kw\">:</span></span>\n<span id=\"cb1-23\"><a href=\"#cb1-23\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"at\">          </span><span class=\"fu\">branch</span><span class=\"kw\">:</span><span class=\"at\"> gh-pages</span><span class=\"co\"> # The branch the action should deploy to.</span></span>\n<span id=\"cb1-24\"><a href=\"#cb1-24\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"at\">          </span><span class=\"fu\">folder</span><span class=\"kw\">:</span><span class=\"at\"> dist</span><span class=\"co\"> # The folder the action should deploy.</span></span></code></pre></div>\n<h2 id=\"add-any-environment-variables\">Add any environment variables</h2>\n<p><strong>Note:</strong> There is almost certainly a better way to do this. Should probably look into it at some point.</p>\n<ul>\n<li><ol type=\"1\">\n<li>Add any key-value pairs as repository secrets in your repo‚Äôs <b>Settings -&gt; Secrets</b> page. I guess this only makes them available in the pipeline, but not available from the <code>process</code>, which is why you have to do the next step.</li>\n</ol></li>\n<li><ol start=\"2\" type=\"1\">\n<li>Add a <code>Create .env File</code> step before the <code>Install and Build</code> step</li>\n</ol></li>\n</ul>\n<div class=\"sourceCode\" id=\"cb2\"><pre class=\"sourceCode yml\"><code class=\"sourceCode yaml\"><span id=\"cb2-1\"><a href=\"#cb2-1\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"co\"># .github/workflows/gh_pages_deploy.yml snippet</span></span>\n<span id=\"cb2-2\"><a href=\"#cb2-2\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"kw\">-</span><span class=\"at\"> </span><span class=\"fu\">name</span><span class=\"kw\">:</span><span class=\"at\"> Create .env File</span></span>\n<span id=\"cb2-3\"><a href=\"#cb2-3\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"fu\">  run</span><span class=\"kw\">: </span><span class=\"ch\">|</span></span>\n<span id=\"cb2-4\"><a href=\"#cb2-4\" aria-hidden=\"true\" tabindex=\"-1\"></a>    touch .env</span>\n<span id=\"cb2-5\"><a href=\"#cb2-5\" aria-hidden=\"true\" tabindex=\"-1\"></a>    echo API_KEY=${{ secrets.API_KEY }} &gt;&gt; .env</span>\n<span id=\"cb2-6\"><a href=\"#cb2-6\" aria-hidden=\"true\" tabindex=\"-1\"></a>    echo AUTH_DOMAIN=${{ secrets.AUTH_DOMAIN }} &gt;&gt; .env</span></code></pre></div>\n<h2 id=\"references\">References</h2>\n<ul>\n<li>https://github.blog/2020-09-25-github-action-hero-james-ives-and-github-pages-deploy/</li>\n<li>https://github.com/JamesIves/github-pages-deploy-action</li>\n<li>https://github.com/marketplace/actions/deploy-to-github-pages</li>\n</ul>\n"},{"_id":"init_npm_project","_body":"<h1>\nInitialize an NPM TypeScript project\n</h1>\n<h2 id=\"initialize-project\">Initialize Project</h2>\n<div class=\"sourceCode\" id=\"cb1\"><pre class=\"sourceCode bash\"><code class=\"sourceCode bash\"><span id=\"cb1-1\"><a href=\"#cb1-1\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"fu\">mkdir</span> my_project</span>\n<span id=\"cb1-2\"><a href=\"#cb1-2\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"bu\">cd</span> my_project</span>\n<span id=\"cb1-3\"><a href=\"#cb1-3\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"fu\">git</span> init</span>\n<span id=\"cb1-4\"><a href=\"#cb1-4\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"bu\">echo</span> <span class=\"st\">&quot;node_modules&quot;</span> <span class=\"op\">&gt;&gt;</span> .gitignore</span>\n<span id=\"cb1-5\"><a href=\"#cb1-5\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"bu\">echo</span> <span class=\"st\">&quot;build&quot;</span> <span class=\"op\">&gt;&gt;</span> .gitignore</span>\n<span id=\"cb1-6\"><a href=\"#cb1-6\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"ex\">npm</span> init <span class=\"at\">-y</span></span></code></pre></div>\n<h2 id=\"update-package.json\">Update <code>package.json</code></h2>\n<p>Set your package.json to look similar to the example below.</p>\n<p>Note the <code>main</code> and <code>types</code> attributes. Other things (like the npm <code>scripts</code>) depend on them</p>\n<div class=\"sourceCode\" id=\"cb2\"><pre class=\"sourceCode json\"><code class=\"sourceCode json\"><span id=\"cb2-1\"><a href=\"#cb2-1\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"er\">//</span> <span class=\"er\">package.json</span></span>\n<span id=\"cb2-2\"><a href=\"#cb2-2\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"fu\">{</span></span>\n<span id=\"cb2-3\"><a href=\"#cb2-3\" aria-hidden=\"true\" tabindex=\"-1\"></a>  <span class=\"dt\">&quot;name&quot;</span><span class=\"fu\">:</span> <span class=\"st\">&quot;my_project&quot;</span><span class=\"fu\">,</span></span>\n<span id=\"cb2-4\"><a href=\"#cb2-4\" aria-hidden=\"true\" tabindex=\"-1\"></a>  <span class=\"dt\">&quot;version&quot;</span><span class=\"fu\">:</span> <span class=\"st\">&quot;0.0.1&quot;</span><span class=\"fu\">,</span></span>\n<span id=\"cb2-5\"><a href=\"#cb2-5\" aria-hidden=\"true\" tabindex=\"-1\"></a>  <span class=\"dt\">&quot;description&quot;</span><span class=\"fu\">:</span> <span class=\"st\">&quot;my_project&quot;</span><span class=\"fu\">,</span></span>\n<span id=\"cb2-6\"><a href=\"#cb2-6\" aria-hidden=\"true\" tabindex=\"-1\"></a>  <span class=\"dt\">&quot;main&quot;</span><span class=\"fu\">:</span> <span class=\"st\">&quot;build/index.js&quot;</span><span class=\"fu\">,</span></span>\n<span id=\"cb2-7\"><a href=\"#cb2-7\" aria-hidden=\"true\" tabindex=\"-1\"></a>  <span class=\"dt\">&quot;types&quot;</span><span class=\"fu\">:</span> <span class=\"st\">&quot;build/index.d.ts&quot;</span><span class=\"fu\">,</span></span>\n<span id=\"cb2-8\"><a href=\"#cb2-8\" aria-hidden=\"true\" tabindex=\"-1\"></a>  <span class=\"dt\">&quot;scripts&quot;</span><span class=\"fu\">:</span> <span class=\"fu\">{</span></span>\n<span id=\"cb2-9\"><a href=\"#cb2-9\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"dt\">&quot;build&quot;</span><span class=\"fu\">:</span> <span class=\"st\">&quot;rimraf ./build &amp;&amp; tsc&quot;</span><span class=\"fu\">,</span></span>\n<span id=\"cb2-10\"><a href=\"#cb2-10\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"dt\">&quot;start&quot;</span><span class=\"fu\">:</span> <span class=\"st\">&quot;npm run build &amp;&amp; node build/index.js&quot;</span></span>\n<span id=\"cb2-11\"><a href=\"#cb2-11\" aria-hidden=\"true\" tabindex=\"-1\"></a>  <span class=\"fu\">},</span></span>\n<span id=\"cb2-12\"><a href=\"#cb2-12\" aria-hidden=\"true\" tabindex=\"-1\"></a>  <span class=\"dt\">&quot;repository&quot;</span><span class=\"fu\">:</span> <span class=\"fu\">{</span></span>\n<span id=\"cb2-13\"><a href=\"#cb2-13\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"dt\">&quot;type&quot;</span><span class=\"fu\">:</span> <span class=\"st\">&quot;git&quot;</span><span class=\"fu\">,</span></span>\n<span id=\"cb2-14\"><a href=\"#cb2-14\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"dt\">&quot;url&quot;</span><span class=\"fu\">:</span> <span class=\"st\">&quot;git+https://github.com/brombaut/my_project.git&quot;</span></span>\n<span id=\"cb2-15\"><a href=\"#cb2-15\" aria-hidden=\"true\" tabindex=\"-1\"></a>  <span class=\"fu\">},</span></span>\n<span id=\"cb2-16\"><a href=\"#cb2-16\" aria-hidden=\"true\" tabindex=\"-1\"></a>  <span class=\"dt\">&quot;keywords&quot;</span><span class=\"fu\">:</span> <span class=\"ot\">[]</span><span class=\"fu\">,</span></span>\n<span id=\"cb2-17\"><a href=\"#cb2-17\" aria-hidden=\"true\" tabindex=\"-1\"></a>  <span class=\"dt\">&quot;author&quot;</span><span class=\"fu\">:</span> <span class=\"st\">&quot;Ben Rombaut&quot;</span><span class=\"fu\">,</span></span>\n<span id=\"cb2-18\"><a href=\"#cb2-18\" aria-hidden=\"true\" tabindex=\"-1\"></a>  <span class=\"dt\">&quot;license&quot;</span><span class=\"fu\">:</span> <span class=\"st\">&quot;ISC&quot;</span><span class=\"fu\">,</span></span>\n<span id=\"cb2-19\"><a href=\"#cb2-19\" aria-hidden=\"true\" tabindex=\"-1\"></a>  <span class=\"dt\">&quot;private&quot;</span><span class=\"fu\">:</span> <span class=\"kw\">false</span><span class=\"fu\">,</span></span>\n<span id=\"cb2-20\"><a href=\"#cb2-20\" aria-hidden=\"true\" tabindex=\"-1\"></a>  <span class=\"dt\">&quot;bugs&quot;</span><span class=\"fu\">:</span> <span class=\"fu\">{</span></span>\n<span id=\"cb2-21\"><a href=\"#cb2-21\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"dt\">&quot;url&quot;</span><span class=\"fu\">:</span> <span class=\"st\">&quot;https://github.com/brombaut/my_project/issues&quot;</span></span>\n<span id=\"cb2-22\"><a href=\"#cb2-22\" aria-hidden=\"true\" tabindex=\"-1\"></a>  <span class=\"fu\">},</span></span>\n<span id=\"cb2-23\"><a href=\"#cb2-23\" aria-hidden=\"true\" tabindex=\"-1\"></a>  <span class=\"dt\">&quot;homepage&quot;</span><span class=\"fu\">:</span> <span class=\"st\">&quot;https://github.com/brombaut/my_project#readme&quot;</span><span class=\"fu\">,</span></span>\n<span id=\"cb2-24\"><a href=\"#cb2-24\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"fu\">}</span></span></code></pre></div>\n<h2 id=\"install-basic-dependencies\">Install basic dependencies</h2>\n<p>TypeScript has Implicit, Explicit, and Ambient types. Ambient types are types that get added to the global execution scope. Since we‚Äôre using Node, it would be good if we could get type safety and auto-completion on the Node apis like <code>file</code>, <code>path</code>, <code>process</code>, etc. That‚Äôs what installing the DefinitelyTyped type definition for Node will do.</p>\n<pre><code>npm install typescript --save-dev\nnpm install @types/node --save-dev\nnpm install rimraf</code></pre>\n<h2 id=\"create-tsconfig.json\">Create <code>tsconfig.json</code></h2>\n<div class=\"sourceCode\" id=\"cb4\"><pre class=\"sourceCode bash\"><code class=\"sourceCode bash\"><span id=\"cb4-1\"><a href=\"#cb4-1\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"ex\">tsc</span> <span class=\"at\">--init</span></span></code></pre></div>\n<ul>\n<li><strong>target</strong>: We want to compile to es5 since we want to build a package with browser compatibility.</li>\n<li><strong>module</strong>: Use commonjs for compatibility.</li>\n<li><strong>declaration</strong>: When you building packages, this should be true. Typescript will then also export type definitions together with the compiled javascript code so the package can be used with both Typescript and Javascript.</li>\n<li><strong>outDir</strong>: The javascript will be compiled to the lib folder.</li>\n<li><strong>include</strong>: All source files in the src folder</li>\n<li><strong>exclude</strong>: We don‚Äôt want to transpile node_modules, neither tests since these are only used during development.</li>\n</ul>\n<div class=\"sourceCode\" id=\"cb5\"><pre class=\"sourceCode json\"><code class=\"sourceCode json\"><span id=\"cb5-1\"><a href=\"#cb5-1\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"er\">//</span>  <span class=\"er\">minimum</span> <span class=\"er\">tsconfig.json</span></span>\n<span id=\"cb5-2\"><a href=\"#cb5-2\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"er\">//</span> <span class=\"er\">if</span> <span class=\"er\">you</span> <span class=\"er\">use</span> <span class=\"er\">tsc</span> <span class=\"er\">--init,</span> <span class=\"er\">it</span> <span class=\"er\">will</span> <span class=\"er\">look</span> <span class=\"er\">different,</span> <span class=\"er\">but</span> <span class=\"er\">you</span> <span class=\"er\">should</span> <span class=\"er\">make</span> <span class=\"er\">sure</span> <span class=\"er\">to</span> <span class=\"er\">copy</span> <span class=\"er\">the</span> <span class=\"er\">&quot;outDir&quot;,</span> <span class=\"er\">&quot;include&quot;,</span> <span class=\"er\">and</span> <span class=\"er\">&quot;exclude&quot;</span> <span class=\"er\">attributes.</span></span>\n<span id=\"cb5-3\"><a href=\"#cb5-3\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"fu\">{</span></span>\n<span id=\"cb5-4\"><a href=\"#cb5-4\" aria-hidden=\"true\" tabindex=\"-1\"></a>  <span class=\"dt\">&quot;compilerOptions&quot;</span><span class=\"fu\">:</span> <span class=\"fu\">{</span></span>\n<span id=\"cb5-5\"><a href=\"#cb5-5\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"dt\">&quot;target&quot;</span><span class=\"fu\">:</span> <span class=\"st\">&quot;es5&quot;</span><span class=\"fu\">,</span></span>\n<span id=\"cb5-6\"><a href=\"#cb5-6\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"dt\">&quot;module&quot;</span><span class=\"fu\">:</span> <span class=\"st\">&quot;commonjs&quot;</span><span class=\"fu\">,</span></span>\n<span id=\"cb5-7\"><a href=\"#cb5-7\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"dt\">&quot;declaration&quot;</span><span class=\"fu\">:</span> <span class=\"kw\">true</span><span class=\"fu\">,</span></span>\n<span id=\"cb5-8\"><a href=\"#cb5-8\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"dt\">&quot;outDir&quot;</span><span class=\"fu\">:</span> <span class=\"st\">&quot;./build&quot;</span><span class=\"fu\">,</span></span>\n<span id=\"cb5-9\"><a href=\"#cb5-9\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"dt\">&quot;strict&quot;</span><span class=\"fu\">:</span> <span class=\"kw\">true</span></span>\n<span id=\"cb5-10\"><a href=\"#cb5-10\" aria-hidden=\"true\" tabindex=\"-1\"></a>  <span class=\"fu\">},</span></span>\n<span id=\"cb5-11\"><a href=\"#cb5-11\" aria-hidden=\"true\" tabindex=\"-1\"></a>  <span class=\"dt\">&quot;include&quot;</span><span class=\"fu\">:</span> <span class=\"ot\">[</span><span class=\"st\">&quot;src&quot;</span><span class=\"ot\">]</span><span class=\"fu\">,</span></span>\n<span id=\"cb5-12\"><a href=\"#cb5-12\" aria-hidden=\"true\" tabindex=\"-1\"></a>  <span class=\"dt\">&quot;exclude&quot;</span><span class=\"fu\">:</span> <span class=\"ot\">[</span><span class=\"st\">&quot;node_modules&quot;</span><span class=\"ot\">,</span> <span class=\"st\">&quot;**/__tests__/*&quot;</span><span class=\"ot\">]</span></span>\n<span id=\"cb5-13\"><a href=\"#cb5-13\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"fu\">}</span></span></code></pre></div>\n"},{"_id":"publish_npm_project","_body":"<h1>\nPublish a TypeScript project to NPM\n</h1>\n<h2 id=\"add-publishing-related-scripts\">Add publishing related scripts</h2>\n<p>Only take what you need form this (e.g., if you don‚Äôt have linting, you don‚Äôt need <code>preversion</code>). At a minimum, you should have <code>prepare</code>, <code>version</code>, and <code>postversion</code>.</p>\n<ul>\n<li><strong>prepare</strong> will run both BEFORE the package is packed and published, and on local npm install. Perfect for running building the code. Add this script to package.json</li>\n<li><strong>prepublishOnly</strong> will run BEFORE prepare and ONLY on npm publish. Here we will run our test and lint to make sure we don‚Äôt publish bad code</li>\n<li><strong>preversion</strong> will run before bumping a new package version. To be extra sure that we‚Äôre not bumping a version with bad code, why not run lint here as well?</li>\n<li><strong>version</strong> will run after a new version has been bumped. If your package has a git repository, like in our case, a commit and a new version-tag will be made every time you bump a new version. This command will run BEFORE the commit is made. One idea is to run the formatter here and so no ugly code will pass into the new version:</li>\n<li><strong>postversion</strong> will run after the commit has been made. A perfect place for pushing the commit as well as the tag.</li>\n</ul>\n<div class=\"sourceCode\" id=\"cb1\"><pre class=\"sourceCode json\"><code class=\"sourceCode json\"><span id=\"cb1-1\"><a href=\"#cb1-1\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"er\">//</span> <span class=\"er\">...package.json</span> <span class=\"er\">snippet</span></span>\n<span id=\"cb1-2\"><a href=\"#cb1-2\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"fu\">{</span></span>\n<span id=\"cb1-3\"><a href=\"#cb1-3\" aria-hidden=\"true\" tabindex=\"-1\"></a>  <span class=\"dt\">&quot;scripts&quot;</span><span class=\"fu\">:</span> <span class=\"fu\">{</span></span>\n<span id=\"cb1-4\"><a href=\"#cb1-4\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"dt\">&quot;prepare&quot;</span> <span class=\"fu\">:</span> <span class=\"st\">&quot;npm run build&quot;</span><span class=\"fu\">,</span></span>\n<span id=\"cb1-5\"><a href=\"#cb1-5\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"dt\">&quot;prepublishOnly&quot;</span> <span class=\"fu\">:</span> <span class=\"st\">&quot;npm test &amp;&amp; npm run lint&quot;</span><span class=\"fu\">,</span></span>\n<span id=\"cb1-6\"><a href=\"#cb1-6\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"dt\">&quot;preversion&quot;</span> <span class=\"fu\">:</span> <span class=\"st\">&quot;npm run lint&quot;</span><span class=\"fu\">,</span></span>\n<span id=\"cb1-7\"><a href=\"#cb1-7\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"dt\">&quot;version&quot;</span> <span class=\"fu\">:</span> <span class=\"st\">&quot;npm run format &amp;&amp; git add -A src&quot;</span><span class=\"fu\">,</span></span>\n<span id=\"cb1-8\"><a href=\"#cb1-8\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"dt\">&quot;postversion&quot;</span> <span class=\"fu\">:</span> <span class=\"st\">&quot;git push &amp;&amp; git push --tags&quot;</span></span>\n<span id=\"cb1-9\"><a href=\"#cb1-9\" aria-hidden=\"true\" tabindex=\"-1\"></a>  <span class=\"fu\">}</span></span>\n<span id=\"cb1-10\"><a href=\"#cb1-10\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"fu\">}</span></span></code></pre></div>\n<h2 id=\"only-include-what-you-need-in-your-npm-package\">Only include what you need in your npm package</h2>\n<p>Add the files attribute to package.json. This assumes your output build folder is <code>lib</code>.</p>\n<div class=\"sourceCode\" id=\"cb2\"><pre class=\"sourceCode json\"><code class=\"sourceCode json\"><span id=\"cb2-1\"><a href=\"#cb2-1\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"er\">//</span> <span class=\"er\">...package.json</span> <span class=\"er\">snippet</span></span>\n<span id=\"cb2-2\"><a href=\"#cb2-2\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"fu\">{</span></span>\n<span id=\"cb2-3\"><a href=\"#cb2-3\" aria-hidden=\"true\" tabindex=\"-1\"></a>  <span class=\"dt\">&quot;files&quot;</span><span class=\"fu\">:</span> <span class=\"ot\">[</span></span>\n<span id=\"cb2-4\"><a href=\"#cb2-4\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"st\">&quot;lib/**/*&quot;</span></span>\n<span id=\"cb2-5\"><a href=\"#cb2-5\" aria-hidden=\"true\" tabindex=\"-1\"></a>  <span class=\"ot\">]</span><span class=\"fu\">,</span></span>\n<span id=\"cb2-6\"><a href=\"#cb2-6\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"fu\">}</span></span></code></pre></div>\n<h2 id=\"commit-and-push-to-git\">Commit and push to git</h2>\n<div class=\"sourceCode\" id=\"cb3\"><pre class=\"sourceCode bash\"><code class=\"sourceCode bash\"><span id=\"cb3-1\"><a href=\"#cb3-1\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"fu\">git</span> add <span class=\"at\">-A</span> <span class=\"kw\">&amp;&amp;</span> <span class=\"fu\">git</span> commit <span class=\"at\">-m</span> <span class=\"st\">&quot;Setup Package&quot;</span></span>\n<span id=\"cb3-2\"><a href=\"#cb3-2\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"fu\">git</span> push</span></code></pre></div>\n<h2 id=\"publish-to-npm\">Publish to NPM</h2>\n<p>First login in console</p>\n<div class=\"sourceCode\" id=\"cb4\"><pre class=\"sourceCode bash\"><code class=\"sourceCode bash\"><span id=\"cb4-1\"><a href=\"#cb4-1\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"ex\">npm</span> login</span></code></pre></div>\n<p>Then publish. If you are using scoped packages, you have to add the <code>--access public</code> flag.</p>\n<div class=\"sourceCode\" id=\"cb5\"><pre class=\"sourceCode bash\"><code class=\"sourceCode bash\"><span id=\"cb5-1\"><a href=\"#cb5-1\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"ex\">npm</span> publish <span class=\"at\">--access</span> public</span></code></pre></div>\n<h2 id=\"bump-version\">Bump version</h2>\n<div class=\"sourceCode\" id=\"cb6\"><pre class=\"sourceCode bash\"><code class=\"sourceCode bash\"><span id=\"cb6-1\"><a href=\"#cb6-1\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"ex\">npm</span> version patch</span></code></pre></div>\n<p>Our preversion, version, and postversion will run, create a new tag in git and push it to our remote repository. Now publish again.</p>\n<div class=\"sourceCode\" id=\"cb7\"><pre class=\"sourceCode bash\"><code class=\"sourceCode bash\"><span id=\"cb7-1\"><a href=\"#cb7-1\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"ex\">npm</span> publish <span class=\"at\">--access</span> public</span></code></pre></div>\n"}]